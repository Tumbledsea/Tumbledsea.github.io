__require=function e(t,o,i){function n(a,r){if(!o[a]){if(!t[a]){var s=a.split("/");if(s=s[s.length-1],!t[s]){var m="function"==typeof __require&&__require;if(!r&&m)return m(s,!0);if(c)return c(s,!0);throw new Error("Cannot find module '"+a+"'")}}var _=o[a]={exports:{}};t[a][0].call(_.exports,function(e){return n(t[a][1][e]||e)},_,_.exports,e,t,o,i)}return o[a].exports}for(var c="function"==typeof __require&&__require,a=0;a<i.length;a++)n(i[a]);return n}({BaseView:[function(e,t,o){"use strict";cc._RF.push(t,"c834fIZqBtOZ6cEijuEe5c7","BaseView"),cc.Class({extends:cc.Component,properties:{m_BtRoll:cc.Button,m_BtJump:cc.Button,m_Back1:[cc.Node],m_Back2:[cc.Node],m_Back3:[cc.Node],m_Back4:[cc.Node],m_Back5:[cc.Node],m_Floor:[cc.Node],m_HeroPrefab:[cc.Prefab]},onLoad:function(){this.m_Hero=cc.instantiate(this.m_HeroPrefab[g_UserInfoData.m_CurSelHeroID]),this.node.addChild(this.m_Hero),this.m_Hero=this.m_Hero.getComponent("SceneHeroMng"),this.myHeroPlay("Run"),this.m_BtRoll.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.m_BtRoll.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.m_BtRoll.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEnd,this),this.m_BtJump.node.on(cc.Node.EventType.TOUCH_START,this.touchJumpStar,this);var e=this.m_Floor[0].getComponent("Floor");(e=this.m_Floor[1].getComponent("Floor")).changeFloor();for(var t=[this.m_Back1,this.m_Back2,this.m_Back3,this.m_Back4,this.m_Back5,this.m_Floor],o=[BackMoveTime1,BackMoveTime2,BackMoveTime3,BackMoveTime4,BackMoveTime5,BackMoveFloor],i=0;i<t.length;i++)for(var n=0;n<this.m_Back1.length;n++){var c=0;null!=(e=t[i][n].getComponent("Floor"))&&(e.changeFloor(),c+=e.m_offset_start);var a=t[i][n].width;t[i][n].setPosition(n*(a-3),0);var r=cc.moveTo(n*o[i]+o[i],cc.p(-(a+c-3),0)),s=cc.sequence(r,cc.callFunc(this.backMoveEnd,this,o[i]));t[i][n].runAction(s)}},touchJumpStar:function(){this.onAnimationChange(this,"Jump")},backMoveEnd:function(e,t){var o=e.getComponent("Floor"),i=0,n=0;null!=o&&(o.changeFloor(),i=o.m_offset_start,n=o.m_offset_end);var c=e.width;e.setPosition(c+n-4,0);var a=cc.moveTo(2*t,cc.p(-(c+i-4),0)),r=cc.sequence(a,cc.callFunc(this.backMoveEnd,this,t));e.runAction(r)},touchStart:function(){cc.log("touchStart"),g_UserInfoData.m_CurHAS_State!=HAS_Jump1&&g_UserInfoData.m_CurHAS_State!=HAS_Jump2&&this.myHeroPlay("Roll")},touchEnd:function(){cc.log("touchEnd"),g_UserInfoData.m_CurHAS_State!=HAS_Jump1&&g_UserInfoData.m_CurHAS_State!=HAS_Jump2&&this.myHeroPlay("Run")},callBackDownOver:function(){cc.log("callBackDownOver"),this.myHeroPlay("Run")},onAnimationChange:function(e,t){if(cc.log("onAnimationChange "+t),"Jump"==t&&this.isCanChangeClip("Jump")){var o=cc.moveTo(1,-92,42).easing(cc.easeCubicActionOut()),i=cc.moveTo(1,-92,-52).easing(cc.easeCubicActionIn()),n=cc.callFunc(this.callBackDownOver,this,this),c=cc.sequence(o,i,n);this.m_Hero.node.runAction(c)}this.myHeroPlay(t)},myHeroPlay:function(e){0!=this.isCanChangeClip(e)&&("Roll"==e?this.m_Hero.node.setPosition(-92,-57):"Run"==e&&this.m_Hero.node.setPosition(-92,-49),this.m_Hero.play(e))},isCanChangeClip:function(e){if("Roll"==e){if(g_UserInfoData.m_CurHAS_State==HAS_Jump1)return!1;if(g_UserInfoData.m_CurHAS_State==HAS_Run)return!0}else if("Jump"==e)return g_UserInfoData.m_CurHAS_State==HAS_Run;return!0}}),cc._RF.pop()},{}],Floor:[function(e,t,o){"use strict";cc._RF.push(t,"7af88UE0lZO+JCGGssw4A4j","Floor"),cc.Class({extends:cc.Component,properties:{m_FloorBlock:[cc.Prefab]},onLoad:function(){this.m_offset_start=0,this.m_offset_end=0},changeFloor:function(){this.node.removeAllChildren();var e=!1,t=0,o=0;cc.random0To1()>.5&&(e=!0,t=140+140*cc.random0To1(),o=this.node.width*cc.random0To1());var i=g_FloorStarPosX;for(this.m_offset_start=i;;){var n=cc.instantiate(this.m_FloorBlock[FloorBlockMin]);this.node.addChild(n);var c=cc.instantiate(this.m_FloorBlock[FloorBlockRight]);this.node.addChild(c);var a=cc.instantiate(this.m_FloorBlock[FloorBlockLeft]);if(this.node.addChild(a),c.zIndex=100,n.x=i,i+=n.width,e&&i>o&&(c.x=i,i+=t,a.x=i-a.width),i>this.node.width){g_FloorStarPosX=i-this.node.width,this.m_offset_end=g_FloorStarPosX;break}}}}),cc._RF.pop()},{}],GameScene:[function(e,t,o){"use strict";cc._RF.push(t,"3df51s5jW5GWIJrTkzeqMvC","GameScene"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){}}),cc._RF.pop()},{}],MessageBox:[function(e,t,o){"use strict";cc._RF.push(t,"1585agqi/hGzLsS01HE9rgz","MessageBox"),cc.Class({extends:cc.Component,properties:{m_TitleLabel:cc.Label,m_TextLabel:cc.Label},onLoad:function(){},onShow:function(e){this.node.active=e},setTitle:function(e){this.m_TitleLabel.string=e},setText:function(e){this.m_TextLabel.string=e},setCallBack:function(e){this.m_CallBack=e},onClickOk:function(){null!=this.m_CallBack&&this.m_CallBack(),this.onShow(!1)}}),cc._RF.pop()},{}],RoomScene:[function(e,t,o){"use strict";cc._RF.push(t,"68b83d4K1VMXL/okU5vbdFS","RoomScene"),cc.Class({extends:cc.Component,properties:{m_BtAction:[cc.Node],m_BtPlayerInfo:[cc.Node],m_MainView:cc.Node,m_SelPlayerView:cc.Node,m_RichText:cc.RichText,m_SelHeroPrefab:cc.Prefab,m_ScrollContent:cc.Node,m_HeroPrefab:[cc.Prefab],m_HeroEyeClip:cc.Node,m_UserDataInfo:cc.Node,m_MessageBoxPrefab:cc.Prefab,m_SelectPlayerView:cc.Node,m_MainViewHero:cc.Node},onLoad:function(){g_RoomScene=this,this.m_MessageBox=cc.instantiate(this.m_MessageBoxPrefab),this.node.addChild(this.m_MessageBox),this.m_MessageBox=this.m_MessageBox.getComponent("MessageBox"),this.m_MessageBox.onShow(!1),this.setHeroEyeClipStyle(0),this.m_UserDataInfo=this.m_UserDataInfo.getComponent("UserDataInfo"),this.m_MainView.setPosition(0,0),this.m_SelPlayerView.active=!1,this.btStartPos=new Array;for(var e=0;e<this.m_BtAction.length;e++)this.btStartPos[e]=this.m_BtAction[e].getPosition();for(e=0;e<this.m_BtPlayerInfo.length;e++){this.m_BtPlayerInfo[e].getChildByName("Pressed").active=!1,this.m_BtPlayerInfo[e].on(cc.Node.EventType.TOUCH_START,this.touchShowTexture,this),this.m_BtPlayerInfo[e].on(cc.Node.EventType.TOUCH_END,this.touchHideTexture,this),this.m_BtPlayerInfo[e].on(cc.Node.EventType.TOUCH_CANCEL,this.touchHideTexture,this)}this.m_SelectPlayerView=this.m_SelectPlayerView.getComponent("SelectPlayerView"),this.m_SelectPlayerView.updateHero()},setHeroEyeClipStyle:function(e){g_UserInfoData.m_CurSelHeroID=e,this.m_HeroEyeClip.removeAllChildren();var t=cc.instantiate(this.m_HeroPrefab[e]);this.m_HeroEyeClip.addChild(t),t=t.getComponent("SelHeroUiPrefab"),1==e?t.setBodyScale(.8,.8):t.setBodyScale(1,1)},touchShowTexture:function(e){e.target.getChildByName("Pressed").active=!0},touchHideTexture:function(e){e.target.getChildByName("Pressed").active=!1},onChangeScene:function(){cc.director.loadScene("GameScene")},onActionBtOutOrIn:function(e){for(var t=0;t<this.m_BtAction.length;t++){var o,i=cc.delayTime(.1*t);o=e?cc.moveTo(MainMoveControlTime,cc.p(350,this.btStartPos[t].y)):cc.moveTo(MainMoveControlTime,this.btStartPos[t]);var n=cc.callFunc(function(e,t){t.index==this.m_BtAction.length-1&&(t.value?this.callOpenPlayerView(this):this.callOpenMainView(this))},this,{index:t,value:e}),c=cc.sequence(i,o,n);this.m_BtAction[t].runAction(c)}var a,r;e?(a=cc.moveTo(MainMoveControlTime,cc.p(52,0)),r=cc.fadeOut(MainMoveControlTime)):(a=cc.moveTo(MainMoveControlTime,cc.p(-124,0)),r=cc.fadeIn(MainMoveControlTime));var s=cc.spawn(a,r);this.m_MainViewHero.runAction(s)},callOpenPlayerView:function(){this.m_MainView.active=!1,this.m_SelPlayerView.active=!0},onOpenPlayerView:function(){this.onActionBtOutOrIn(!0)},callOpenMainView:function(){this.m_MainView.active=!0,this.m_SelPlayerView.active=!1},onOpenMainView:function(){this.m_MainView.active=!0,this.m_SelPlayerView.active=!1,this.onActionBtOutOrIn(!1)}}),cc._RF.pop()},{}],SceneHeroMng:[function(e,t,o){"use strict";cc._RF.push(t,"402b2OX9dJDfb1XpvOM5ZdO","SceneHeroMng"),cc.Class({extends:cc.Component,properties:{m_HeroAnim:cc.Animation},onLoad:function(){this.touchingNumber=0},play:function(e){"Run"==e?g_UserInfoData.m_CurHAS_State=HAS_Run:"Jump"==e?g_UserInfoData.m_CurHAS_State=HAS_Jump1:"Roll"==e&&(g_UserInfoData.m_CurHAS_State=HAS_Roll);var t=e+g_UserInfoData.m_CurSelHeroID;this.m_HeroAnim.play(t)},getCurrentClipName:function(){return this.m_HeroAnim.currentClip.name},onCollisionEnter:function(e){this.m_HeroAnim.node.color=cc.Color.RED,this.touchingNumber++},onCollisionStay:function(e){},onCollisionExit:function(){this.touchingNumber--,0===this.touchingNumber&&(this.m_HeroAnim.node.color=cc.Color.WHITE)}}),cc._RF.pop()},{}],SelBackGroupPrefab:[function(e,t,o){"use strict";cc._RF.push(t,"5ece1gbzDlOppynp25sh1LZ","SelBackGroupPrefab"),cc.Class({extends:cc.Component,properties:{m_BackGroup:cc.Sprite,m_GameUI:cc.SpriteAtlas,m_BtOk:cc.Node,m_LeftRight:[cc.Node],m_ScoreType:[cc.Sprite],m_Score:[cc.Label],m_TimeLable:cc.Node},onLoad:function(){},setRoomScene:function(e){this.m_RoomScene=e},setHeroStyle:function(e){if(null!=this.m_RoomScene.m_HeroPrefab[e.id]){var t=cc.instantiate(this.m_RoomScene.m_HeroPrefab[e.id]);this.m_BackGroup.node.addChild(t),t=t.getComponent("SelHeroUiPrefab"),1==e.id?t.setBodyScale(.3,.65):t.setBodyScale(.3,.7)}},setStyle:function(e){if(null!=e){if(cc.log(e.style),0==e.style){var t=this.m_GameUI.getSpriteFrame("GameUI16");this.m_BackGroup.spriteFrame=t,this.m_BackGroup.node.width=104,this.m_BackGroup.node.height=310}else if(1==e.style){t=this.m_GameUI.getSpriteFrame("GameUI17");this.m_BackGroup.spriteFrame=t,this.m_BackGroup.node.width=90,this.m_BackGroup.node.height=310}else{t=this.m_GameUI.getSpriteFrame("GameUI17");this.m_BackGroup.spriteFrame=t,this.m_BackGroup.node.width=90,this.m_BackGroup.node.height=310}this.setHeroStyle(e),this.m_HeroData=e,g_UserInfoData.isHaveHero(e.id)?this.setBuyHero(!1,e.id):this.setBuyHero(!0,e.id),this.setTimeOpenBuyHero(e.id)}},onSelHero:function(){this.m_RoomScene.setHeroEyeClipStyle(this.m_HeroData.id),this.m_RoomScene.onOpenMainView()},setTimeOpenBuyHero:function(e){for(var t=0;t<g_HeroBuyData.length;t++)g_HeroBuyData[t].id==e&&(this.m_TimeLable.active=g_HeroBuyData[t].bTimeShow,g_HeroBuyData[t].bTimeShow&&(this.m_LeftRight[0].active=!1,this.m_LeftRight[1].active=!1,this.m_BtOk.active=!1))},setBuyHero:function(e,t){if(e){this.m_LeftRight[0].active=!0,this.m_LeftRight[1].active=!0,this.m_BtOk.active=!1;for(var o=0;o<g_HeroBuyData.length;o++)if(g_HeroBuyData[o].id==t){this.m_BuyHeroNeedData=g_HeroBuyData[o],this.changeBuyHeroScoreTypeTexture(g_HeroBuyData[o]);break}}else this.m_LeftRight[0].active=!1,this.m_LeftRight[1].active=!1,this.m_BtOk.active=!0},changeBuyHeroScoreTypeTexture:function(e){for(var t=null,o=(new Array,0);o<2;o++){var i=!1;e.valueType[o]==BuyHeroScoreType?(t=this.m_GameUI.getSpriteFrame("GameUI21"),i=!0):e.valueType[o]==BuyHeroMoneyType?(t=this.m_GameUI.getSpriteFrame("GameUI18"),i=!0):e.valueType[o]==BuyHeroStoneType?(t=this.m_GameUI.getSpriteFrame("01_14_14"),i=!0):e.valueType[o]==BuyTimeType&&(i=!1),this.m_ScoreType[o].spriteFrame=t,this.m_Score[o].string=""+e.value[o],this.m_ScoreType[o].node.active=i,this.m_Score[o].node.active=i,this.m_LeftRight[o].active=i}},onClickBuyHero:function(e,t){var o=parseInt(t);this.m_BuyHeroNeedData.valueType[o]==BuyHeroScoreType?g_UserInfoData.m_Score<this.m_BuyHeroNeedData.value[o]?(g_RoomScene.m_MessageBox.onShow(!0),g_RoomScene.m_MessageBox.setText("\u94bb\u77f3\u4e0d\u591f,\u8fd8\u5dee"+(this.m_BuyHeroNeedData.value[o]-g_UserInfoData.m_Score)+"\u94bb\u77f3!"),g_RoomScene.m_MessageBox.setCallBack(function(){})):(g_UserInfoData.m_Score-=this.m_BuyHeroNeedData.value[o],g_UserInfoData.m_HaveHero.push(this.m_BuyHeroNeedData.id)):this.m_BuyHeroNeedData.valueType[o]==BuyHeroMoneyType?g_UserInfoData.m_Money<this.m_BuyHeroNeedData.value[o]?(g_RoomScene.m_MessageBox.onShow(!0),g_RoomScene.m_MessageBox.setText("\u91d1\u5e01\u4e0d\u591f,\u8fd8\u5dee"+(this.m_BuyHeroNeedData.value[o]-g_UserInfoData.m_Money)+"\u91d1\u5e01!"),g_RoomScene.m_MessageBox.setCallBack(function(){})):(g_UserInfoData.m_Money-=this.m_BuyHeroNeedData.value[o],g_UserInfoData.m_HaveHero.push(this.m_BuyHeroNeedData.id)):(this.m_BuyHeroNeedData.valueType[o],BuyHeroStoneType),g_RoomScene.m_SelectPlayerView.updateHero(),g_RoomScene.m_UserDataInfo.updateUserDataInfo()}}),cc._RF.pop()},{}],SelHeroUiPrefab:[function(e,t,o){"use strict";cc._RF.push(t,"51a90T6uCVBCKBUDlP/BT4H","SelHeroUiPrefab"),cc.Class({extends:cc.Component,properties:{m_Body:cc.Node},onLoad:function(){},setBodyScale:function(e,t){this.m_Body.setScale(e,t)}}),cc._RF.pop()},{}],SelectPlayerView:[function(e,t,o){"use strict";cc._RF.push(t,"2a9d6irBHxF1KtmkEw4qmma","SelectPlayerView"),cc.Class({extends:cc.Component,properties:{},ctor:function(){this.m_HeroPageView=new Array,this.m_HeroData=new Array},onLoad:function(){},updateHero:function(){g_RoomScene.m_ScrollContent.removeAllChildren();for(var e=0;e<g_HeroBuyData.length;e++){this.m_HeroPageView[e]=cc.instantiate(g_RoomScene.m_SelHeroPrefab),g_RoomScene.m_ScrollContent.addChild(this.m_HeroPageView[e]);var t=this.m_HeroPageView[e].getComponent("SelBackGroupPrefab");t.setRoomScene(g_RoomScene),t.setStyle(g_HeroBuyData[e])}}}),cc._RF.pop()},{}],UserDataInfo:[function(e,t,o){"use strict";cc._RF.push(t,"260dd50pyZO35wpj0UBPxCt","UserDataInfo"),cc.Class({extends:cc.Component,properties:{m_Score:cc.Label,m_Money:cc.Label},onLoad:function(){this.updateUserDataInfo()},setScore:function(e){this.m_Score.string=e.toString()},setMoney:function(e){var t=""+e;e>1e4&&(t=e/1e4+"\u4e07"),this.m_Money.string=t},updateUserDataInfo:function(){this.setScore(g_UserInfoData.m_Score),this.setMoney(g_UserInfoData.m_Money)},onAddScore:function(){g_UserInfoData.m_Score+=100,this.updateUserDataInfo()},onAddMoney:function(){g_UserInfoData.m_Money+=100,this.updateUserDataInfo()}}),cc._RF.pop()},{}]},{},["BaseView","Floor","GameScene","SceneHeroMng","MessageBox","RoomScene","SelBackGroupPrefab","SelHeroUiPrefab","SelectPlayerView","UserDataInfo"]);